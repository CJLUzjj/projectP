# å¸•é²å·¥ä½œç³»ç»Ÿ (Pal Work System)

ä¸€ä¸ªå®Œæ•´çš„å¸•é²å·¥ä½œç®¡ç†ç³»ç»Ÿï¼Œè®©ç©å®¶çš„æ€ªç‰©ä¼™ä¼´å¯ä»¥è¿›è¡Œå„ç§å·¥ä½œæ¥äº§å‡ºé“å…·å’Œèµ„æºã€‚

## ğŸ“‹ åŠŸèƒ½ç‰¹æ€§

### ğŸ¾ æ€ªç‰©å·¥ä½œèƒ½åŠ›
- **å¤šç§æ€ªç‰©ç±»å‹**ï¼šå“¥å¸ƒæ—ã€å…½äººã€å·¨é­”ã€é¾™æ—ã€æ¶é­”ã€äº¡çµ
- **ä¸“ä¸šåŒ–å·¥ä½œ**ï¼šæ¯ç§æ€ªç‰©æ“…é•¿ä¸åŒçš„å·¥ä½œç±»å‹
- **æ•ˆç‡ç³»ç»Ÿ**ï¼šåŸºäºæ€ªç‰©ç±»å‹å’Œå·¥ä½œç±»å‹çš„æ•ˆç‡è®¡ç®—
- **ç»éªŒæˆé•¿**ï¼šå·¥ä½œç»éªŒç§¯ç´¯ç³»ç»Ÿ

### ğŸ”§ å·¥ä½œç±»å‹
1. **æŒ–çŸ¿ (Mining)** - è·å¾—çŸ³æã€é“çŸ¿çŸ³ã€é­”æ³•æ°´æ™¶
2. **ä¼æœ¨ (Logging)** - è·å¾—æœ¨æã€æµ†æœ
3. **å†œè€• (Farming)** - è·å¾—æµ†æœã€æ²»ç–—è‰è¯ã€å¸ƒæ–™
4. **å»ºé€  (Construction)** - è·å¾—å·¥å…·ã€çŸ³æ
5. **åˆ¶ä½œ (Crafting)** - è·å¾—è£…å¤‡ã€å¸ƒæ–™
6. **çƒ¹é¥ª (Cooking)** - è·å¾—é£Ÿç‰©ã€è¯å‰‚
7. **è¿è¾“ (Transport)** - è·å¾—å„ç§åŸºç¡€èµ„æº
8. **å®ˆå« (Guarding)** - è·å¾—çš®é©ã€è‚‰ç±»ã€çŸ¿çŸ³
9. **ç ”ç©¶ (Research)** - è·å¾—æ°´æ™¶ã€ç¬¦æ–‡ã€è¯å‰‚
10. **ç‹©çŒ (Hunting)** - è·å¾—è‚‰ç±»ã€çš®é©ã€é¾™é³

### ğŸ“¦ é“å…·ç³»ç»Ÿ
- **åŸºç¡€èµ„æº**ï¼šçŸ³æã€æœ¨æã€é£Ÿç‰©ã€é‡‘å±ã€æ°´æ™¶ã€è‰è¯
- **åˆ¶ä½œææ–™**ï¼šå¸ƒæ–™ã€çš®é©ã€è¯å‰‚
- **é«˜çº§é“å…·**ï¼šæ­¦å™¨ã€é˜²å…·ã€å·¥å…·
- **ç¨€æœ‰é“å…·**ï¼šé¾™é³ã€å¤ä»£ç¬¦æ–‡ç­‰ä¼ è¯´çº§ææ–™

## ğŸš€ å¿«é€Ÿå¼€å§‹

### åŸºæœ¬ä½¿ç”¨

```typescript
import { WorkManager } from './Logic/WorkManager';
import { createExampleMonster } from './Logic/WorkSystemExample';
import { MonsterType } from './Data/common';
import { WorkType } from './Data/WorkData';

// åˆ›å»ºå·¥ä½œç®¡ç†å™¨
const workManager = new WorkManager();

// åˆ›å»ºä¸€ä¸ªå“¥å¸ƒæ—
const goblin = createExampleMonster(MonsterType.Goblin, "çŸ¿å·¥å“¥å¸ƒæ—", 2);

// è®©å“¥å¸ƒæ—å¼€å§‹æŒ–çŸ¿
const result = workManager.startWork(goblin, WorkType.Mining);
log.info(result.message);

// æ›´æ–°å·¥ä½œè¿›åº¦ï¼ˆé€šå¸¸åœ¨æ¸¸æˆå¾ªç¯ä¸­è°ƒç”¨ï¼‰
const completedWorks = workManager.updateWorkProgress();
for (const work of completedWorks) {
    log.info(work.message);
}
```

### è¿è¡Œæ¼”ç¤º

```typescript
import { runWorkSystemDemo } from './Logic/WorkSystemExample';

// è¿è¡Œå®Œæ•´çš„æ¼”ç¤ºç¨‹åº
runWorkSystemDemo();
```

## ğŸ“Š æ€ªç‰©å·¥ä½œèƒ½åŠ›è¡¨

| æ€ªç‰©ç±»å‹ | æ“…é•¿å·¥ä½œ | æ•ˆç‡ | ç‰¹ç‚¹ |
|---------|---------|------|------|
| å“¥å¸ƒæ— (Goblin) | æŒ–çŸ¿ã€è¿è¾“ã€åˆ¶ä½œ | 60-80% | å¹³è¡¡å‹å·¥äºº |
| å…½äºº (Orc) | å»ºé€ ã€ä¼æœ¨ã€å®ˆå«ã€ç‹©çŒ | 70-90% | åŠ›é‡å‹å·¥äºº |
| å·¨é­” (Troll) | æŒ–çŸ¿ã€å»ºé€ ã€è¿è¾“ | 85-95% | é‡å‹å·¥ä½œä¸“å®¶ |
| é¾™æ— (Dragon) | ç ”ç©¶ã€å®ˆå«ã€ç‹©çŒã€åˆ¶ä½œ | 85-100% | ä¸‡èƒ½å‹ç²¾è‹± |
| æ¶é­” (Demon) | ç ”ç©¶ã€åˆ¶ä½œã€çƒ¹é¥ªã€å®ˆå« | 80-95% | æŠ€æœ¯å‹ä¸“å®¶ |
| äº¡çµ (Undead) | å†œè€•ã€çƒ¹é¥ªã€ç ”ç©¶ã€å®ˆå« | 75-90% | æŒä¹…å‹å·¥äºº |

## ğŸ® æ ¸å¿ƒç³»ç»Ÿ

### å·¥ä½œåˆ†é…
```typescript
// æ£€æŸ¥æ€ªç‰©æ˜¯å¦èƒ½å·¥ä½œ
const canWork = workManager.canWork(monster, WorkType.Mining);
if (canWork.canWork) {
    workManager.startWork(monster, WorkType.Mining);
} else {
    log.info(canWork.reason);
}
```

### è¿›åº¦ç›‘æ§
```typescript
// è·å–æ‰€æœ‰æ´»è·ƒå·¥ä½œ
const activeWorks = workManager.getActiveWorks();

// è·å–ç‰¹å®šæ€ªç‰©çš„å·¥ä½œè¿›åº¦
const progress = workManager.getMonsterWorkProgress("çŸ¿å·¥å“¥å¸ƒæ—");
if (progress) {
    log.info(`è¿›åº¦: ${Math.round(progress.progress * 100)}%`);
}
```

### åº“å­˜ç®¡ç†
```typescript
// è·å–åº“å­˜
const inventory = workManager.getInventory();

// è·å–ç‰¹å®šé“å…·æ•°é‡
const stoneCount = workManager.getItemCount("stone");
```

### ä½“åŠ›ç®¡ç†
```typescript
// æ¢å¤æ€ªç‰©ä½“åŠ›
workManager.restoreStamina(monster, 50);
```

## âš™ï¸ é«˜çº§åŠŸèƒ½

### è‡ªå®šä¹‰æ€ªç‰©
```typescript
import { MonsterData } from './Data/MonsterData';
import { WorkAbility } from './Data/WorkData';

const customMonster: MonsterData = {
    name: "è‡ªå®šä¹‰æ€ªç‰©",
    type: MonsterType.Dragon,
    level: 10,
    // ... å…¶ä»–å±æ€§
    workAbilities: [
        { workType: WorkType.Research, efficiency: 100, stamina: 30 }
    ],
    stamina: 200,
    maxStamina: 200,
    workExperience: new Map(),
    isWorking: false
};
```

### å·¥ä½œé…ç½®è‡ªå®šä¹‰
æ‚¨å¯ä»¥ä¿®æ”¹ `WorkConfigs.ts` ä¸­çš„é…ç½®æ¥è°ƒæ•´ï¼š
- å·¥ä½œæ—¶é—´
- äº§å‡ºç‰©å“å’Œæ¦‚ç‡
- ç­‰çº§è¦æ±‚
- ä½“åŠ›æ¶ˆè€—

### é“å…·æ•°æ®æ‰©å±•
åœ¨ `GameItems.ts` ä¸­æ·»åŠ æ–°çš„é“å…·ï¼š
```typescript
["new_item", {
    id: "new_item",
    name: "æ–°é“å…·",
    type: ItemType.Rare,
    rarity: 4,
    value: 100,
    description: "ä¸€ä¸ªæ–°çš„ç¨€æœ‰é“å…·"
}]
```

## ğŸ”„ å·¥ä½œæµç¨‹

1. **åˆ›å»ºæ€ªç‰©** - ä½¿ç”¨ `createExampleMonster` æˆ–è‡ªå®šä¹‰åˆ›å»º
2. **åˆ†é…å·¥ä½œ** - è°ƒç”¨ `workManager.startWork()`
3. **ç›‘æ§è¿›åº¦** - å®šæœŸè°ƒç”¨ `workManager.updateWorkProgress()`
4. **æ”¶è·å¥–åŠ±** - è‡ªåŠ¨æ·»åŠ åˆ°åº“å­˜
5. **ç®¡ç†ä½“åŠ›** - ä½¿ç”¨ `restoreStamina()` æ¢å¤ä½“åŠ›

## ğŸ“ˆ æ•ˆç‡è®¡ç®—

å·¥ä½œæ—¶é—´ = åŸºç¡€æ—¶é—´ Ã— (100 / æ€ªç‰©æ•ˆç‡)
äº§å‡ºæ•°é‡ = åŸºç¡€æ•°é‡ Ã— (æ€ªç‰©æ•ˆç‡ / 100)
ç»éªŒè·å¾— = åŸºç¡€ç»éªŒ Ã— (æ€ªç‰©æ•ˆç‡ / 100)

## ğŸ”§ æ‰©å±•å»ºè®®

1. **UIç•Œé¢** - æ·»åŠ å›¾å½¢ç•Œé¢æ˜¾ç¤ºå·¥ä½œè¿›åº¦
2. **è‡ªåŠ¨åŒ–** - å®ç°å·¥ä½œé˜Ÿåˆ—å’Œè‡ªåŠ¨åˆ†é…
3. **å‡çº§ç³»ç»Ÿ** - åŸºäºå·¥ä½œç»éªŒæå‡æ€ªç‰©èƒ½åŠ›
4. **å»ºç­‘ç³»ç»Ÿ** - æ·»åŠ å·¥ä½œç«™æå‡æ•ˆç‡
5. **ä»»åŠ¡ç³»ç»Ÿ** - åŸºäºå·¥ä½œäº§å‡ºçš„ä»»åŠ¡å¥–åŠ±

## ğŸ“ æ³¨æ„äº‹é¡¹

- æ€ªç‰©éœ€è¦è¶³å¤Ÿçš„ä½“åŠ›æ‰èƒ½å·¥ä½œ
- ä¸åŒå·¥ä½œæœ‰ç­‰çº§è¦æ±‚
- æ•ˆç‡å½±å“å·¥ä½œæ—¶é—´å’Œäº§å‡º
- å·¥ä½œç»éªŒä¼šç´¯ç§¯ï¼Œä¸ºæœªæ¥å‡çº§ç³»ç»Ÿåšå‡†å¤‡

è¿™ä¸ªå·¥ä½œç³»ç»Ÿä¸ºå¸•é²æ¸¸æˆæä¾›äº†å®Œæ•´çš„å·¥ä½œç®¡ç†åŠŸèƒ½ï¼Œç©å®¶å¯ä»¥åˆç†åˆ†é…æ€ªç‰©è¿›è¡Œä¸åŒå·¥ä½œï¼Œè·å¾—å„ç§é“å…·å’Œèµ„æºã€‚ 